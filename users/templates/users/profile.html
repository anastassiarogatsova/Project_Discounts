{% load static %}
<!DOCTYPE html>
<html>
<head>
 <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="{% static 'sales/css/main.css ' %}">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700|Montserrat:300" rel="stylesheet">
    
    {% if title %}
        <title>Sooduskett - {{ title }}</title>
    {% else %}
        <title>Sooduskett</title>
    {% endif %}
    
</head>
<body>
    <header class="site-header">
        <nav class="navbar navbar-expand-md navbar-dark custom fixed-top">
        <div class="container-fluid">
            <div><svg class="li_image" id="Filled" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m488 152-40 192h-304l-40-192z" fill="#ea9f26"/><path d="m384 200-120 96v48h128l16-144z" fill="#2d85cc"/><path d="m448 344h-88l4.59-55.08 35.41 7.08z" fill="#eb423f"/><path d="m464 152h-80l24-48h32z" fill="#ffd33a"/><path d="m488 152-20 96h-4v-96z" fill="none"/><path d="m488 152-24 96h-56v-48h-24v-48z" fill="#ffd33a"/><path d="m464 248v-8l-56-40-8 48h-32l-8 96h88l20-96z" fill="#248256"/><path d="m416 72h16a16 16 0 0 1 16 16v16a0 0 0 0 1 0 0h-48a0 0 0 0 1 0 0v-16a16 16 0 0 1 16-16z" fill="#ea9f26"/><path d="m224 296v48h-80l-10-48z" fill="#996046"/><path d="m256 128v72h-144l-15.043-79.167.551-.833a26.366 26.366 0 0 1 22.035-11.765 26.812 26.812 0 0 1 5.27.521c0-.174-.013-.346-.013-.521 0-20.012 16.476-36.235 36.8-36.235a36.78 36.78 0 0 1 34.651 24.022 26.362 26.362 0 0 1 49.463 12.213 25.523 25.523 0 0 1 -5.76 16.161 26.712 26.712 0 0 1 5.76-.631z" fill="#35a872"/><path d="m240 40h128v112h-128z" fill="#c48669"/><path d="m240 40h96v112h-96z" fill="#d49073"/><path d="m256 200h-40l8 48h-40l-40 48h-10l-30-144h152z" fill="#248256"/><circle cx="176" cy="440" fill="#7e8589" r="32"/><circle cx="400" cy="440" fill="#7e8589" r="32"/><path d="m296 248-16-48h-24v-48h128v48l-56 48z" fill="#eb423f"/><path d="m304 64h-32a8 8 0 0 0 0 16h32a8 8 0 0 0 0-16z"/><path d="m24 80h49.664l60.593 257.521a32.054 32.054 0 0 0 -22.257 30.479v16a32.036 32.036 0 0 0 32 32h.022a40 40 0 1 0 63.956 0h160.044a40 40 0 1 0 63.956 0h32.022a8 8 0 0 0 0-16h-320a16.019 16.019 0 0 1 -16-16v-16a16.019 16.019 0 0 1 16-16h304a8 8 0 0 0 7.832-6.368l40-192a8 8 0 0 0 -7.832-9.632h-19.056l-16.634-33.268a7.985 7.985 0 0 0 3.69-6.732v-16a24.027 24.027 0 0 0 -24-24h-16a24.027 24.027 0 0 0 -24 24v16a7.985 7.985 0 0 0 3.69 6.732l-16.634 33.268h-3.056v-104a8 8 0 0 0 -8-8h-128a8 8 0 0 0 -8 8v36.707a34.664 34.664 0 0 0 -34.313 5.324 44.993 44.993 0 0 0 -80.164 18.261 34.283 34.283 0 0 0 -20.671 8.4l-9.065-38.525a8 8 0 0 0 -7.787-6.167h-56a8 8 0 0 0 0 16zm376 336a24 24 0 1 1 -24 24 24.028 24.028 0 0 1 24-24zm-224 0a24 24 0 1 1 -24 24 24.028 24.028 0 0 1 24-24zm-67.076-256h60.014l4 32h-56.484zm19.076 81.072-7.782-33.072h54.72l4 32h-50.938zm11.042 46.928-7.53-32h35.407l-26.666 32zm42.784-24.895 3.112 24.895h-23.857zm-31.49 72.895-7.529-32h44.131l4 32zm40.726-128h18.161l5.333 32h-19.494zm6 48h55.264l1.334 32h-52.6zm28.382-48h24.882l1.334 32h-20.883zm-9.444 128h-8.938l-4-32h12.938zm16 0v-32h22.326l1.334 32zm34.34-128h7.894l10.666 32h-17.226zm2 48h35.66l-34.579 25.935zm51.986 80h-48.652l-1.334-32h51.32zm2-48h-34.326l35.434-26.575zm2-48h-22.56l-10.666-32h34.56zm2-48h-60.652l-1.334-32h63.32zm58.612 144h-16.244l2.667-32h17.577zm6-48h-18.244l2.667-32h19.577zm10.124 48 3.877-31.019 24.816 31.019zm42.241-8.678-18.658-23.322h23.517zm8.197-39.322h-44.438l4-32h47.1zm-38.433-48 3.627-29.012 34.806 29.012zm50.652-10.652-25.619-21.348h30.065zm14.443-69.348-6.662 32h-52.438l4-32zm-70.162-72a8.009 8.009 0 0 1 8-8h16a8.009 8.009 0 0 1 8 8v8h-32zm4.944 24h22.112l16 32h-54.112zm-20.944 48h14.938l-4 32h-10.938zm-5.04 48h13.978l-4 32h-47.312zm-42.96-160h16v96h-16zm-.326 112h32.326v32h-33.66zm-2 48h20.7l-21.467 18.4zm-2 48h19.632l-2.667 32h-18.3zm-2 48h17.632l-2.667 32h-16.3zm-89.674-211.8v-44.2h80v96h-80zm.559 73.381 1.101 26.419h-18.712zm-15.507-5.581-21.333 32h-22.657l-4-32zm-129.913-33.795a18.237 18.237 0 0 1 16.4-9.97 18.809 18.809 0 0 1 3.7.366 8 8 0 0 0 9.57-7.956l-.012-.41c.003-15.568 12.923-28.235 28.803-28.235a28.836 28.836 0 0 1 27.133 18.755 8 8 0 0 0 14.544 1.093 18.518 18.518 0 0 1 28.723-4.592v48.744h-126.84l-3.673-15.608a7.948 7.948 0 0 0 1.652-2.187z"/><circle cx="176" cy="440" r="8"/><circle cx="400" cy="440" r="8"/></svg></div>
            <div><a class="navbar-brand mr-4" href="{% url 'sales-home' %}">SoodusKett</a></div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggle">
                <div class="navbar-nav mr-auto">
                    <a class="nav-item nav-link" href="{% url 'sales-home' %}">Pealeht</a>
                </div> 
                <!-- Navbar Right Side -->
                <div class="navbar-nav">
                    {% if user.is_authenticated %}
                        <a class="nav-item nav-link" href="{% url 'profile' %}">Töölaud</a>
                        <a class="nav-item nav-link" href="{% url 'logout' %}">Välju</a>
                        
                    {% else %}
                        <a class="nav-item nav-link" href="{% url 'login' %}">Sisene</a>
                        <a class="nav-item nav-link" href="{% url 'register' %}">Loo kasutaja</a>
                    {% endif %}
                </div>
            </div>
        </div>
        </nav>
        
    </header>
   <main role="main" class="container-fluid">

    <div class="col-12">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{message.tags}}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        <p class="category_headline" style="font-size: 25px; margin-bottom: 80px;">Töölaud</p>
        
        <div id="sale-wrapper" class="sales-box">
            
            {% for result in results %}
                {% for sale in sales %}
                {% if sale.headline == result.headline and sale.store == result.store %}
                <a class="main_href" style="text-decoration: none; color: black;" href="sale/{{sale.id}}/"><div id="{{sale.id}}" class="card_div">
                <div class="image_button">
                    {% if sale.store == "Rimi" %}
                        <img src="https://upload.wikimedia.org/wikipedia/commons/d/da/Rimi_Baltic_Logo.png" width="70px" height="60px"}>
                    {% else %}
                       <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Maxima_logo.svg/1280px-Maxima_logo.svg.png" width="70px" height="20px">
                    {% endif %} 
                    <a href="http://127.0.0.1:8000/profile_sale/{{result.id}}/delete">
                        <svg class="delete_element" height="512pt" viewBox="0 0 512 512" width="512pt" xmlns="http://www.w3.org/2000/svg"><path d="m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm0 0" fill="#f44336"/><path d="m350.273438 320.105469c8.339843 8.34375 8.339843 21.824219 0 30.167969-4.160157 4.160156-9.621094 6.25-15.085938 6.25-5.460938 0-10.921875-2.089844-15.082031-6.25l-64.105469-64.109376-64.105469 64.109376c-4.160156 4.160156-9.621093 6.25-15.082031 6.25-5.464844 0-10.925781-2.089844-15.085938-6.25-8.339843-8.34375-8.339843-21.824219 0-30.167969l64.109376-64.105469-64.109376-64.105469c-8.339843-8.34375-8.339843-21.824219 0-30.167969 8.34375-8.339843 21.824219-8.339843 30.167969 0l64.105469 64.109376 64.105469-64.109376c8.34375-8.339843 21.824219-8.339843 30.167969 0 8.339843 8.34375 8.339843 21.824219 0 30.167969l-64.109376 64.105469zm0 0" fill="#fafafa"/></svg>
                    </a>
                </div>
                        <div class="product_container">
                            <img src={{sale.image}} width="250px" height="200px" >
                        </div>
                        <div class="price_section">
                            <p>{{sale.headline}}</p>
                            {% if sale.discount == "0" or sale.discount == null %}
                                <p class="soodus"></p>
                            {% else %}
                                <p class="soodus">{{sale.discount}}</p>
                            {% endif %}
                            <p class="soodus">{{sale.new_price}}</p>
                        </div>
                </div>
                </a>
            {% endif %}
            {% endfor %}
            {% endfor %}
        </div>

        {% load crispy_forms_tags %}
        <div class="category_headline" style="font-size: 25px;">Kasutaja andmed</div>
        <div class="content-section">
            <div class="media">
              <img class="rounded-circle account-img" src="{{ user.profile.image.url }}" width="100px" height="100px">
              <div class="media-body">
                <h2 class="media_info">{{ user.username }}</h2>
                <p class="media_info">{{ user.email }}</p>
              </div>
            </div>
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <fieldset class="form-group">
                    
                    {{ u_form|crispy }}
                    {{ p_form|crispy }}
                </fieldset>
                <div class="form-group">
                    <button class="btn btn-outline-info" type="submit">Uuenda andmeid</button>
                </div> 
            </form>
        </div>

    </div>
    
  </div>
</main>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
    {% csrf_token %}
        <script src="{% static 'sales/js/main.js' %}"></script>
    
</body>
</html>

